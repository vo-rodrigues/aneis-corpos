\chapter{Domínios de Integridade}
Neste capítulo, exploraremos com mais detalhes os domínios de integridade e a teoria que nasce deles.

\section{Relações entre corpos e domínios de integridade}
Conforme visto, todo corpo é um domínio de integridade, e a recíproca não é verdadeira (sendo $\mathbb Z$ um contra-exemplo).

A seguir, apresentaremos algumas relações entre corpos e domínios de integridade.

\begin{prop}
Todo domínio de integridade finito é um corpo.
\end{prop}
\begin{proof}
    Seja $R$ um domínio de integridade finito.
    Fixe $a \in R\setminus\{0\}$.
    Veremos que $a$ é invertível.

    Considere $\phi:R\setminus\{0\}\rightarrow R\setminus \{0\}$ dado por $\phi(x)=ax$.

    Como $R$ é um domínio de integridade, para todo $x \in R\setminus \{0\}$, temos $ax \neq 0$, logo, $\phi$ está bem definida.

    $\phi$ é uma função injetora: se $\phi(x)=\phi(y)$, então $ax=ay$.
    Logo, $a(x-y)=0$.
    Como $a\neq 0$ e $R$ é um domínio de integridade, segue que $x-y=0$, ou seja, $x=y$.

    Como $R\setminus\{0\}$ é finito e $\phi:R\setminus\{0\}\rightarrow R\setminus \{0\}$ é injetora, segue que $\phi$ é sobrejetora.
    Em particular, existe $x \in X$ tal que $ax=\phi(x)=1$.
    Logo, $a$ é invertível.
\end{proof}

Portanto, restrito aos anéis finitos, o estudo dos corpos e domínios de integridade colapsa em um único estudo.

Outra relação importante é a que segue:

\begin{prop}
Seja $R$ um anel comutativo e $I$ um ideal próprio de $R$. São equivalentes:

\begin{enumerate}[label=(\roman*)]
    \item $R/I$ é um corpo;
    \item $I$ é maximal.
\end{enumerate}
\end{prop}

\begin{proof}
    Seja $q:R\rightarrow I$ o mapa quociente.

    (i) $\Rightarrow$ (ii): Suponha que $R/I$ é um corpo.
    

    $I$ é um ideal próprio, caso contrário, teríamos que $R/I$ é o anel trivial, que não é um corpo.

    Agora suponha que $J$ é um ideal que contém $I$ propriamente.
    Veremos que $J=R$.
    Seja $a \in J\setminus I$.
    Como $a\notin I$, temos que $q(a)\neq 0$.
    Como $A/I$ é um corpo, existe $b \in R$ tal que $q(a)q(b)=1$.
    Isso implica que existe $x \in I$ tal que $ab+x=1$.
    Como $a \in J$ e $x \in I\subseteq J$, segue que $1=ab+x\in J$, e, portanto, $J=R$.

    (ii) $\Rightarrow$ (i): Suponha que $I$ é maximal. Vejamos que $R/I$ é um corpo.

    Seja $x \in R\setminus I$ não nulo.
    Tome $a \in R$ tal que $q(a)=x$.
    Temos que $a \notin I$.
    Como $I+\langle a\rangle$ é um ideal que contém $I$ propriamente, segue que $I+\langle a\rangle=R$.
    Logo, existe $b \in R$ e $c \in I$ tais que $c+ba=1$.
    Assim, $q(1)=q(c)+q(ba)=0+q(b)q(a)=q(b)x$.
    Portanto, $x$ é invertível.
\end{proof}

Será que podemos caracterizar, de forma análoga, ser um domínio de integridade? A resposta é positiva.

\begin{prop}
    Seja $R$ um anel comutativo e $I$ um ideal próprio de $R$. São equivalentes:
    
    \begin{enumerate}[label=(\roman*)]
        \item $R/I$ é um domínio de integridade.
        \item $I$ é primo.
    \end{enumerate}
\end{prop}

\begin{proof}
    Seja $q:R\rightarrow I$ o mapa quociente.

    (i) $\Rightarrow$ (ii): Suponha que $R/I$ é um domínio de integridade.
    

    $I$ é um ideal próprio, caso contrário, teríamos que $R/I$ é o anel trivial, que não é um domínio de integridade.

    Suponha que $a,b \in R$ tais que $ab \in I$.
    Temos que $q(a)q(b)=q(ab)=0$.
    Como $R/I$ é um domínio de integridade, temos que $q(a)=0$ ou $q(b)=0$, ou seja, que $a \in I$ ou $B \in I$.

    Logo, $I$ é primo.

    (ii) $\Rightarrow$ (i): Suponha que $I$ é primo.
    Vejamos que $R/I$ é um domínio de integridade.

    Sejam $x, y \in R$ tais que $q(x)q(y)=0$.
    Devemos ver que $q(x)=0$ ou $q(y)=0$.
    Como $q(xy)=q(x)q(y)=0$, segue que $xy\in I$.
    Então, $x\in I$ ou $y\in I$, ou seja, $q(x)=0$ ou $q(y)=0$.
\end{proof}

Como consequência, temos:

\begin{corol}
    Seja $R$ um anel comutativo finito e $I$ um ideal de $R$. Então $I$ é primo se, e somente se $I$ é maximal.
\end{corol}
\begin{proof}
    Temos que $R/I$ é finito, e, portanto, é um corpo se, e somente se for um domínio de integridade.
    Portanto:

    \[I \text{ é primo} \Leftrightarrow R/I \text{ é um domínio de integridade} \Leftrightarrow R/I \text{ é um corpo} \Leftrightarrow I \text{ é maximal}\]
\end{proof}

\section{O corpo de frações de um domínio de integridade}

Conforme vimos, nem todo domínio de integridade é um corpo, sendo $\mathbb Z$ é o contra-exemplo mais usual.
Apesar disso, parece que, em algum sentido, $\mathbb Q$ é o ``menor'' corpo que contém $\mathbb Z$.

Uma das construções mais usuais do corpo $\mathbb Q$ utiliza classes de equivalências de pares de elementos de $\mathbb Z$.
Nesta seção, estudaremos esta construção de modo generalizado.

Iniciaremos apresentando uma construção do corpo de frações.

\begin{definition}
    Seja $R$ um domínio de integridade.

    Definamos, em $R\times \{0\}$, a relação de equivalência $\sim$ a seguir:

    \[(a, b) \sim (c, d) \Leftrightarrow ad=bc.\]
\end{definition}

Ao longo desta seção, a notação $\sim$ será fixada e utilizada exclusivamente para esse fim.
A ideia é pensar em cada par $(a, b)$ como uma fração $\frac{a}{b}$.
A relação $\sim$ captura a ideia que duas frações $\frac{a}{b}$ e $\frac{c}{d}$ são equivalentes se, e somente se, $ad=bc$.

\begin{lemma}
    Na notação acima, a relação $\sim$ é uma relação de equivalência em $R\times \{0\}$.
\end{lemma}

\begin{proof}
    Seja $(a, b), (c, d), (e, f) \in R\times \{0\}$.
    \begin{itemize}
        \item Temos que $(a, b)\sim (a, b)$, pois $ab=ba$.
        \item Simetria: se $(a, b)\sim (c, d)$, temos que $ad=bc$.
        Logo, $cb=da$, o que nos dá $(c, d)\sim (a, b)$.
        \item Transitividade: suponha que $(a, b)\sim (c, d)$ e $(c, d)\sim (e, f)$.
        Temos que $ad=bc$ e $cf=de$.
        Multiplicando a primeira equação por $f$ e a segunda por $b$, temos que $adf=bcf$ e $bcf=deb$.
        Logo, $adf=deb$.
        Como $d\neq 0$, cancelando, temos que $af=eb$, ou seja, que $(a, b)\sim (e, f)$.
    \end{itemize}
\end{proof}
Assim, podemos definir:

\begin{definition}
    O conjunto das classes de equivalência $(R\times R\setminus\{0\})/\sim$ será denotado por $\Frac(R)$.
    
    A classe de equivalência de um par $(a, b)$ será denotada por $\frac{a}{b}$
\end{definition}

Observe que agora, formalmente, $\frac{a}{b}=\frac{c}{d}$ se, e somente se, $ad=bc$.

Porém, a igualdade $a=\frac{a}{1}$ não faz sentido e será discutida mais adiante.

Agora, definiremos as operações em $\Frac(R)$.

\begin{definition}
    Seja $R$ um domínio de integridade. Define-se, em $\Frac(R)$, as operações a seguir. Para $a, b, c, d \in R$ tais que $b, d\neq 0$:
    \begin{itemize}
        \item soma: $\displaystyle\frac{a}{b}+\frac{c}{d}=\frac{ad+bc}{bd}$, e,
        \item produto: $\displaystyle\frac{a}{b}\cdot\frac{c}{d}=\frac{ac}{bd}$.
    \end{itemize}
\end{definition}

Note que a expressão $\frac{ac}{bd}$ faz sentido já que $bd\neq 0$.
O próximo passo é mostrar que tais operações estão bem definidas.

\begin{lemma}
    Na notação anterior, a soma e o produto de frações estão bem definidas.
\end{lemma}
\begin{proof}
    Consideremos $a, b, a', b', c, d, c', d'\in R$ tais que $b, b', d, d'\neq 0$ e tais que $\frac{a}{b}=\frac{a'}{b'}$ e $\frac{c}{d}=\frac{c'}{d'}$.
    Assim, sabemos que $ab'=a'b$ e $cd'=c'd$.

    Devemos ver que $\frac{ad+bc}{bd}=\frac{a'd'+b'c'}{b'd'}$ e $\frac{ac}{bd}=\frac{a'c'}{b'd'}$.

    Começaremos pela segunda afirmação.
    
    Queremos provar que $acb'd'=a'c'bd$.
    Temos:

    \[acb'd'=(ab')(cd')=(a'b)(c'd)=a'c'bd.\]

    Agora, para a soma, temos que provar que $adb'd'+bcb'd'=a'd'bd+b'c'bd$.
    Multiplicando a equação $ab'=a'b$ por $d'd$, a equação $cd'=c'd$ por $b'b$, e somando, segue a tese.
\end{proof}

Agora veremos que $\Frac(R)$ é um corpo.
\begin{theorem}
    Seja $R$ um domínio de integridade.
    
    Então $\Frac(R)$ é um corpo cujo zero é $\frac{0}{1}$, cuja identidade multiplicativa é $\frac{1}{1}$ e com opostos aditivos $-\frac{a}{b}=\frac{-a}{b}$.

    Além disso, se $\frac{a}{b}$ é não nulo, então $a\neq 0$ e $\frac{b}{a}$ é seu inverso multiplicativo.
\end{theorem}
\begin{proof}
    Primeiro, veremos que $\Frac(R)$, com a soma, é um grupo abeliano.

    Antes, note que para todo $b \in R\setminus\{0\}$, temos que $\frac{0}{b}=\frac{0}{1}$, já que $0\cdot 1=0=0\cdot b$.

    \begin{itemize}
        \item $+$ é associativo: sejam $\frac{a}{b}, \frac{c}{d}, \frac{e}{f} \in \Frac(R)$. Temos que:
        \[\frac{a}{b}+\left(\frac{c}{d}+\frac{e}{f}\right)=\frac{a}{b}+\frac{cd+ef}{df}=\frac{a(df)+b(cd+ef)}{bdf}=\frac{adf+bcd+bef}{bdf}.\]

        Por outro lado,  temos que:
        \[\left(\frac{a}{b}+\frac{c}{d}\right)+\frac{e}{f}=\frac{ad+bc}{bd}+\frac{e}{f}=\frac{(ad+bc)f+bed}{bdf}=\frac{adf+bcd+bef}{bdf}.\]
        Logo, $+$ é associativa.

        \item $+$ é comutativa: sejam $\frac{a}{b}, \frac{c}{d} \in \Frac(R)$. Temos que:
        \[\frac{a}{b}+\frac{c}{d}=\frac{ad+bc}{bd}=\frac{cb+da}{db}=\frac{c}{d}+\frac{a}{b}.\]

        \item $\frac{0}{1}$ é neutro: seja $\frac{a}{b} \in \Frac(R)$. Temos que:
        \item \[\frac{a}{b}+\frac{0}{1}=\frac{a\cdot 1+0\cdot b}{b\cdot 1}=\frac{a}{b}.\]
        
        \item Opostos aditivos: seja $\frac{a}{b} \in \Frac(R)$. Temos que:
        \[\frac{a}{b}+\frac{-a}{b}=\frac{a\cdot b+(-a)\cdot b}{b\cdot b}=\frac{0}{b}=\frac{0}{1}.\]
    \end{itemize}

    Agora, provaremos as propriedades da multiplicação.

    \begin{itemize}
        \item $\cdot $ é associativo: sejam $\frac{a}{b}, \frac{c}{d}, \frac{e}{f} \in \Frac(R)$. Temos que:
        \[\frac{a}{b}\cdot\left(\frac{c}{d}\cdot\frac{e}{f}\right)=\frac{a}{b}\cdot\frac{cd}{df}=\frac{a(cd)}{b(df)}=\frac{(ac)d}{(bd)f}=\frac{ac}{bd}\frac{d}{f}=\left(\frac{a}{b}\cdot\frac{c}{d}\right)\cdot \frac{e}{f}.\]
        \item $\cdot $ é comutativo: sejam $\frac{a}{b}, \frac{c}{d} \in \Frac(R)$. Temos que:
        \[\frac{a}{b}\cdot\frac{c}{d}=\frac{ac}{bd}=\frac{ca}{db}=\frac{c}{d}\cdot\frac{a}{b}.\]
        \item $\frac{1}{1}$ é neutro: seja $\frac{a}{b} \in \Frac(R)$. Temos que:
        \[\frac{a}{b}\cdot\frac{1}{1}=\frac{a\cdot 1}{b\cdot 1}=\frac{a}{b}.\]
        \item Inversos multiplicativos: seja $\frac{a}{b} \in \Frac(R)$ não nulo.
        Como $\frac{a}{b}$ é não nulo, temos que $a\neq 0$, uma vez que $\frac{0}{b}=\frac{0}{1}$.
        Assim, a fração $\frac{b}{a}$ é bem definida, e:
        \[\frac{a}{b}\cdot\frac{b}{a}=\frac{ab}{ba}=\frac{1}{1}.\]
        \item Distributividade: sejam $\frac{a}{b}, \frac{c}{d}, \frac{e}{f} \in \Frac(R)$. Temos que:
        \[\frac{a}{b}\cdot\left(\frac{c}{d}+\frac{e}{f}\right)=\frac{a}{b}\cdot\frac{cd+ef}{df}=\frac{a(cd+ef)}{b(df)}=\frac{acd+aef}{bdf}.\]
        Por outro lado, temos que:
        \[\frac{a}{b}\cdot\frac{c}{d}+\frac{a}{b}\cdot\frac{e}{f}=\frac{ac}{bd}+\frac{ae}{bf}=\frac{ac\cdot f+ae\cdot d}{bdf}=\frac{acdb+aebf}{b^2df}.\]

        Temos que ambos os lados são iguais, pois:

        \[b^2df(acd+aef)=bdf(acdb+aebf).\]
    \end{itemize}
\end{proof}

Assim, à semelhança da relação que o corpo $\mathbb Q$ tem com $\mathbb Z$, construímos um corpo $\Frac(R)$ a partir de um domínio de integridade $R$.

Existe uma identificação natural de $R$ em $\Frac(R)$, como dada a seguir:

\begin{prop}
    A função $\phi:R\rightarrow \Frac(R)$ dada por $\phi(a)=\frac{a}{1}$ é um monomorfismo de anéis. Tal $\phi$ é denominado \emph{identificação natural de $R$ em $\Frac(R)$}.
\end{prop}
\begin{proof}
    Fixe $a, b \in R$.

    Injetividade: se $\frac{a}{1}=\frac{b}{1}$, então $a.1=1.b$, logo, $a=b$.

    Preservação da identidade: temos que $\phi(1)=\frac{1}{1}$, que é a identidade em $\Frac(R)$.

    Preservação das somas: Temos que $\phi(a)+\phi(b)=\frac{a}{1}+\frac{b}{1}=\frac{a\cdot 1+b\cdot 1}{1^2}=\frac{a+b}{1}=\phi(a+b)$.

    Preservação dos produtos: Temos que $\phi(a)\cdot\phi(b)=\frac{a}{1}\cdot\frac{b}{1}=\frac{ab}{1^2}=\phi(ab)$.
\end{proof}

Devido a isso, é natural identificar $a \in R$ com $\phi(a)=\frac{a}{1}$, de modo a dar sentido à igualdade $a=\frac{a}{1}$.

Notemos ainda que, se $a, b\in R$ e $b\neq 0$, então $\frac{a}{b}=\phi(a)\phi^{-1}(b)$.
Desse modo, pode-se pensar que, em algum sentido, $\Frac(R)$ é o menor corpo que contém $R$.
A proposição abaixo não apenas formaliza essa ideia, mas define categoricamente o que é o corpo de frações de um domínio de integridade de modo independente de construções.

\begin{theorem}[Propriedade universal do Corpo de Frações]
    Seja $R$ um domínio de integridade, $\Frac(R)$ seu corpo de frações e $\phi$ a identificação natural de $R$ em $\Frac(R)$.

    Então, para cada corpo $K$ e cada monomorfismo $f:R\rightarrow K$, existe um único homomorfismo de anéis $g$ tal que $g\circ\phi=f$.

    Além disso, se $(L, \psi)$ é um par tal que $L$ é um corpo e $\psi:R\rightarrow L$ é um monomorfismo de anéis, tal que para todo corpo $K$ e todo monomorfismo $f:R\rightarrow K$ existe um homomorfismo de anéis $g$, tal que $g\circ\psi=f$, então $L$ é isomorfo a $\Frac(R)$ -- e existe um único isomorfismo de anéis $u:L\rightarrow K$ tal que $u\circ\phi=\psi$.
\end{theorem}

\begin{proof}
    Começaremos mostrando que o par $(\Frac(R), \phi)$ tem a propriedade desejada.

    Seja $K$ um corpo e $f:R\rightarrow K$ um homomorfismo de anéis.
    Definimos $g:\Frac(R)\rightarrow K$ para $a, b \in R$ com $b\neq 0$ como a seguir:
    \[g\left(\frac{a}{b}\right)=f(a)f(b)^{-1}.\]

    Se $a', b' \in R$ e $b'\neq 0$ são tais que $\frac{a}{b}=\frac{a'}{b'}$, então $ab'=a'b$.
    Logo, $f(a)f(b')=f(a')f(b)$, ou seja, $f(a)f(b)^{-1}=f(a')f(b')^{-1}$ e, portanto, a função está bem definida.

    Vejamos que $g$ é homomorfismo:

    \begin{itemize}
        \item Preservação da soma: sejam $\frac{a}{b}, \frac{c}{d} \in \Frac(R)$. Temos que:
        \[g\left(\frac{a}{b}+\frac{c}{d}\right)=g\left(\frac{ad+bc}{bd}\right)=f(ad+bc)f(bd)^{-1}\]
        \[=f(a)f(d)^{-1}+f(b)f(c)^{-1}=g\left(\frac{a}{b}\right)+g\left(\frac{c}{d}\right).\]
        \item Preservação do produto: sejam $\frac{a}{b}, \frac{c}{d} \in \Frac(R)$ com $b, d\neq 0$. Temos que:
        \[g\left(\frac{a}{b}\cdot\frac{c}{d}\right)=g\left(\frac{ac}{bd}\right)=f(ac)f(bd)^{-1}=f(a)f(b)^{-1}f(c)f(d)^{-1}=g\left(\frac{a}{b}\right)\cdot g\left(\frac{c}{d}\right).\]
        \item Preservação da identidade: sejam $\frac{a}{b} \in \Frac(R)$ com $b\neq 0$. Temos que:
        \[g\left(\frac{1}{1}\right)=f(1)f(1)^{-1}=1_K.\]
    \end{itemize}

    Temos que $g\circ \phi(a)=g(\frac{a}{1})=f(a)f(1)^{-1}=f(a)$, para todo $a \in R$, logo, $g\circ \phi=f$.

    Assim, $g$ satisfaz todos os requisitos necessários.

    Vejamos que $g$ é único.
    Se $\bar g:\Frac(R)\rightarrow K$ é um homomorfismo de anéis tal que $\bar g\circ \phi=f$, fixe $a, b \in R$ com $b\neq 0$. Veremos que $g\left(\frac{a}{b}\right)=\bar g\left(\frac{a}{b}\right)$.
    Ora:

    \[\bar g\left(\frac{a}{b}\right)=\bar g\left(\frac{a}{1}\cdot\frac{1}{b}\right)=\bar g\left(\frac{a}{1}\right)\cdot \bar g\left(\frac{1}{b}\right)\]
    \[=\bar g\circ \phi(a)\cdot \bar g(\phi(b)^{-1})=f(a)\bar g(\phi(b))^{-1}=f(a)f(b)^{-1}=g\left(\frac{a}{b}\right).\]

    Isso prova a primeira parte do teorema.
    Para a segunda parte, suponha que $(L, \psi)$ é um par tal que $L$ é um corpo e $\psi:R\rightarrow L$ é um homomorfismo de anéis, tal que todo corpo $K$ e todo monomorfismo $f:R\rightarrow K$ existe um homomorfismo de anéis $g$, tal que $g\circ\psi=f$.

    Aplicando a propriedade de $(L, \psi)$ para o corpo $K$ e homomorfismo $\phi$, existe um único homomorfismo de anéis $u:L\rightarrow K$ tal que $u\circ \psi=\phi$.
    Basta ver que $u$ é isomorfismo.

    Aplicando a propriedade de $(K, \phi)$ para o corpo $L$ e homomorfismo $\psi$, existe um homomorfismo de anéis $v:K\rightarrow L$ tal que $v\circ \phi=\psi$.
    Veremos que $v=u^{-1}$.

    Aplicando a propriedade de $(L, \psi)$ para o corpo $L$ e homomorfismo $\psi$, existe um único homomorfismo de anéis $w:L\rightarrow L$ tal que $w\circ \psi=\psi$.
    Porém, $\id_L\circ \psi=\psi$ e $(v\circ u)\circ \psi=v\circ \phi=\psi$, logo, $\id_L=w=v\circ u$.

    Aplicando a propriedade de $(K, \phi)$ para o corpo $L$ e homomorfismo $\phi$, existe um único homomorfismo de anéis $\bar w:L\rightarrow K$ tal que $\bar w\circ \phi=\phi$.
    Porém, $\id_K\circ \phi=\phi$ e $(u\circ v)\circ \phi=v\circ \psi=\phi$, logo, $\id_K=\bar w=u\circ v$.

    Logo, $u$ e $v$ são isomorfismos inversos, e segue a tese.

\end{proof}
\section{Exercícios}
\begin{exer}
    Demonstre, com suas próprias palavras, de modo que considere satisfatório, a seguinte afirmação demonstrada no texto: todo domínio de integridade finito é um corpo.
\end{exer}
\begin{exer}
    Mostre que cada corpo de característica zero contém um subcorpo isomorfo à $\mathbb Q$.
\end{exer}
\begin{exer}
    Prove que para todo domínio $R$, a característica de $R$ é igual à de $\Frac(R)$.
\end{exer}
